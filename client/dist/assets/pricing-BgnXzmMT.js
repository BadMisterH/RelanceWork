import"./modulepreload-polyfill-B5Qt9EMX.js";import{createClient as s}from"https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2/+esm";const o="https://owiwkxcwutaprgndlkhp.supabase.co",i="sb_publishable_rr2bz-6nDx-vilDTvskaGg_wx7UiMMa",c=s(o,i),l="/api";async function a(){const{data:{session:e}}=await c.auth.getSession();return e?.access_token||null}const h=document.getElementById("backBtn");a().then(e=>{e&&(h.href="/")});const t=document.getElementById("proBtn");t.addEventListener("click",async()=>{t.disabled=!0,t.innerHTML='<span class="pr-spinner"></span> Redirection...';const e=await a();if(!e){window.location.href="/auth.html";return}try{const n=await(await fetch(l+"/billing/create-checkout",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+e}})).json();if(n.url)window.location.href=n.url;else throw new Error(n.error||"Erreur inconnue")}catch(r){alert("Erreur: "+r.message),t.disabled=!1,t.innerHTML=`
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="18" height="18"><path d="M13 2L3 14h9l-1 8 10-12h-9l1-8z"/></svg>
            Passer a Pro
          `}});
